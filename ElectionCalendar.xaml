<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="EkandidatoApp.ElectionCalendar"
             BackgroundColor="White"
             Title="Election Calendar">

    <Grid x:Name="RootGrid" RowDefinitions="Auto,*" Padding="15" RowSpacing="20">

        <Border Grid.Row="0"
                BackgroundColor="White"
                Padding="15"
                Margin="0, 10, 0, 0"
                HorizontalOptions="FillAndExpand">
            <Border.StrokeShape>
                <RoundRectangle CornerRadius="10"/>
            </Border.StrokeShape>
            <Border.Shadow>
                <Shadow Brush="Black" Offset="5,5" Radius="10" Opacity="0.3"/>
            </Border.Shadow>

            <VerticalStackLayout Spacing="15">

                <Grid ColumnDefinitions="*,Auto" VerticalOptions="Start">

                    <HorizontalStackLayout Grid.Column="0" Spacing="5">
                        <Label x:Name="MonthLabel"
                               Text="April" 
                               FontSize="18" 
                               FontAttributes="Bold" 
                               TextColor="Black"
                               VerticalOptions="Center"/>

                        <Picker x:Name="YearPicker"
                                SelectedIndexChanged="OnYearPickerSelectedIndexChanged"
                                FontSize="18"
                                TextColor="Black"
                                Title="2025"
                                WidthRequest="80"
                                VerticalOptions="Center"/>

                        <Label Text=">" 
                               FontSize="18" 
                               TextColor="Black" 
                               VerticalOptions="Center" 
                               FontAttributes="Bold"/>
                    </HorizontalStackLayout>

                    <HorizontalStackLayout Grid.Column="1" Spacing="10" HorizontalOptions="End">
                        <Label Text="&lt;" 
                               FontSize="18" 
                               TextColor="Gray" 
                               FontAttributes="Bold">
                            <Label.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnPreviousMonthTapped"/>
                            </Label.GestureRecognizers>
                        </Label>
                        <Label Text="&gt;" 
                               FontSize="18" 
                               TextColor="Gray" 
                               FontAttributes="Bold">
                            <Label.GestureRecognizers>
                                <TapGestureRecognizer Tapped="OnNextMonthTapped"/>
                            </Label.GestureRecognizers>
                        </Label>
                    </HorizontalStackLayout>
                </Grid>

                <Grid x:Name="DayOfWeekGrid" ColumnDefinitions="*,*,*,*,*,*,*" ColumnSpacing="5">
                    <Label Text="SUN" Grid.Column="0" HorizontalOptions="Center" FontSize="12" TextColor="Gray"/>
                    <Label Text="MON" Grid.Column="1" HorizontalOptions="Center" FontSize="12" TextColor="Gray"/>
                    <Label Text="TUE" Grid.Column="2" HorizontalOptions="Center" FontSize="12" TextColor="Gray"/>
                    <Label Text="WED" Grid.Column="3" HorizontalOptions="Center" FontSize="12" TextColor="Gray"/>
                    <Label Text="THU" Grid.Column="4" HorizontalOptions="Center" FontSize="12" TextColor="Gray"/>
                    <Label Text="FRI" Grid.Column="5" HorizontalOptions="Center" FontSize="12" TextColor="Gray"/>
                    <Label Text="SAT" Grid.Column="6" HorizontalOptions="Center" FontSize="12" TextColor="Gray"/>
                </Grid>

                <Grid x:Name="DateGrid" 
                      ColumnDefinitions="*,*,*,*,*,*,*" 
                      RowDefinitions="30,30,30,30,30,30" 
                      RowSpacing="15" ColumnSpacing="5"
                      VerticalOptions="FillAndExpand"/>

                <Grid ColumnDefinitions="Auto,*" Padding="0, 5, 0, 0">
                    <Label Text="Time" Grid.Column="0" TextColor="Black" VerticalOptions="Center" />
                    <Border Grid.Column="1" BackgroundColor="#E0E0E0" StrokeShape="RoundRectangle 5" Padding="10,5" HorizontalOptions="End" VerticalOptions="Center">
                        <Label Text="9:41 AM" TextColor="Black" FontAttributes="Bold"/>
                    </Border>
                </Grid>

            </VerticalStackLayout>
        </Border>

        <VerticalStackLayout Grid.Row="1" Spacing="10" Margin="0, 10, 0, 0">
            <Label Text="Upcoming Events" FontSize="20" FontAttributes="Bold" TextColor="Black" Margin="0, 5, 0, 0"/>

            <ListView x:Name="EventsList"
                      SelectionMode="None"
                      HasUnevenRows="true"
                      SeparatorVisibility="None"
                      VerticalOptions="FillAndExpand"
                      BackgroundColor="Transparent">

                <ListView.ItemTemplate>
                    <DataTemplate>
                        <ViewCell>
                            <Border BackgroundColor="White" Padding="15" Margin="0, 5" Stroke="LightGray" StrokeThickness="1">
                                <Border.StrokeShape>
                                    <RoundRectangle CornerRadius="10"/>
                                </Border.StrokeShape>
                                <HorizontalStackLayout Spacing="10">
                                    <Ellipse WidthRequest="10" HeightRequest="10" Fill="{Binding DotColor}" VerticalOptions="Center" />
                                    <VerticalStackLayout Spacing="2">
                                        <Label Text="{Binding Name}" FontSize="16" TextColor="Black"/>
                                        <Label Text="{Binding DisplayDate}" FontSize="12" TextColor="Gray"/>
                                    </VerticalStackLayout>
                                </HorizontalStackLayout>
                            </Border>
                        </ViewCell>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>
        </VerticalStackLayout>

    </Grid>
</ContentPage>